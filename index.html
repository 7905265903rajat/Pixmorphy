<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PixMorph - Resize & Compress Images</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #e6f0fb;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    header {
      width: 100%;
      max-width: 900px;
      background: white;
      padding: 15px 30px;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      border-radius: 8px;
    }

    header img {
      height: 50px;
      user-select: none;
    }

    header h1 {
      font-weight: 700;
      font-size: 28px;
      color: #1a73e8;
      margin: 0;
    }

    .tab-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .tab-buttons button {
      padding: 10px 20px;
      border: none;
      background-color: #1a73e8;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
    }

    .tab-buttons button.active {
      background-color: #155ab6;
    }

    main {
      background: white;
      max-width: 900px;
      width: 100%;
      padding: 25px 30px 40px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
    }

    .tool-section {
      display: none;
    }

    .tool-section.active {
      display: block;
    }

    label {
      display: block;
      margin: 12px 0 6px;
      font-weight: 600;
      color: #1a73e8;
    }

    input[type="file"],
    input[type="number"],
    select {
      padding: 8px 10px;
      font-size: 16px;
      border: 1.5px solid #cbd6ee;
      border-radius: 6px;
      width: 100%;
      max-width: 250px;
    }

    button {
      background-color: #1a73e8;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 15px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #155ab6;
    }

    #preview-container {
      margin-top: 25px;
      text-align: center;
    }

    #result-image {
      max-width: 100%;
      max-height: 400px;
      border-radius: 8px;
      box-shadow: 0 0 12px rgba(26, 115, 232, 0.3);
    }

    #error-msg {
      color: #d32f2f;
      margin-top: 10px;
      font-weight: 600;
    }

    #info {
      margin-top: 12px;
      color: #555;
    }

    #download-link {
      display: inline-block;
      margin-top: 20px;
      padding: 12px 25px;
      background-color: #1a73e8;
      color: white;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
    }

    #download-link:hover {
      background-color: #155ab6;
    }
  </style>
</head>
<body>
  <header>
    <img src="images/pixmorph_logo.png" alt="PixMorph Logo" />
    <h1>PixMorph</h1>
  </header>

  <div class="tab-buttons">
    <button class="tab-btn active" data-tab="resize">Resize Image</button>
    <button class="tab-btn" data-tab="compress">Compress Image</button>
  </div>

  <main>
    <!-- Resize Tool -->
    <div class="tool-section active" id="resize">
      <label for="upload-resize">Upload Image:</label>
      <input type="file" id="upload-resize" accept="image/*" />

      <label for="platform-select">Choose Platform:</label>
      <select id="platform-select">
        <option value="">Custom Size</option>
        <option value="youtube-profile">YouTube Profile (800x800)</option>
        <option value="youtube-banner">YouTube Banner (2560x1440)</option>
        <option value="instagram-profile">Instagram Profile (110x110)</option>
        <option value="instagram-post">Instagram Post (1080x1080)</option>
        <option value="facebook-profile">Facebook Profile (170x170)</option>
        <option value="facebook-cover">Facebook Cover (820x312)</option>
      </select>

      <label for="width-input">Width (px):</label>
      <input type="number" id="width-input" min="1" />

      <label for="height-input">Height (px):</label>
      <input type="number" id="height-input" min="1" />

      <button id="resize-btn">Resize & Preview</button>
      <button id="reset-btn" style="background-color: #888; margin-left: 10px;">Reset</button>

      <div id="error-msg"></div>
      <div id="info"></div>

      <div id="preview-container">
        <img id="result-image" src="" alt="Preview will appear here" />
      </div>

      <a id="download-link" href="#" style="display:none;">Download Resized Image</a>
    </div>

    <!-- Compress Tool -->
    <div class="tool-section" id="compress">
      <label for="upload-compress">Upload Image:</label>
      <input type="file" id="upload-compress" accept="image/*" />

      <label for="quality-input">Compression Quality in Kb(10-10000):</label>
      <input type="number" id="quality-input" min="10" max="100000" value="70" />

      <label for="format-select">Change Format:</label>
      <select id="format-select">
        <option value="image/jpeg">JPEG</option>
        <option value="image/png">PNG</option>
        <option value="image/webp">WEBP</option>
      </select>

      <button id="compress-btn">Compress & Preview</button>

      <div id="preview-container">
        <img id="compressed-image" src="" alt="Compressed preview will appear here" />
      </div>

      <a id="download-compress" href="#" style="display:none;">Download Compressed Image</a>
    </div>
  </main>

  <script>
    const tabButtons = document.querySelectorAll('.tab-btn');
    const sections = document.querySelectorAll('.tool-section');

    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        tabButtons.forEach(b => b.classList.remove('active'));
        sections.forEach(s => s.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    // Resize functionality: copy same logic from your existing script (use upload-resize etc.)
    // Compress functionality:
    const uploadCompress = document.getElementById('upload-compress');
    const qualityInput = document.getElementById('quality-input');
    const formatSelect = document.getElementById('format-select');
    const compressBtn = document.getElementById('compress-btn');
    const compressedImage = document.getElementById('compressed-image');
    const downloadCompress = document.getElementById('download-compress');

    compressBtn.addEventListener('click', () => {
      const file = uploadCompress.files[0];
      if (!file) return alert("Please upload an image.");

      const reader = new FileReader();
      reader.onload = function (event) {
        const img = new Image();
        img.onload = function () {
          const canvas = document.createElement('canvas');
          canvas.width = img.width;
          canvas.height = img.height;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0);

          const quality = parseInt(qualityInput.value) / 100;
          const format = formatSelect.value;

          const dataUrl = canvas.toDataURL(format, quality);
          compressedImage.src = dataUrl;
          downloadCompress.href = dataUrl;
          downloadCompress.download = `pixmorph_compressed.${format.split('/')[1]}`;
          downloadCompress.style.display = 'inline-block';
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>